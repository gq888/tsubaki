{"version":3,"file":"js/955.4a5d1968.js","mappings":"2MACOA,MAAM,Q,2EAAXC,EAAAA,EAAAA,IASM,MATNC,EASM,G,aARJD,EAAAA,EAAAA,IAOEE,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAN0BC,EAAAC,eAAc,CAAhCC,EAAQC,M,WADlBP,EAAAA,EAAAA,IAOE,SALCQ,IAAKF,EAAOG,IAAMF,EACnBG,KAAK,SACJC,MAAOL,EAAOM,MACdC,SAAUP,EAAOO,SACjBC,QAAKC,GAAEX,EAAAY,kBAAkBV,EAAOW,S,0CAQvC,GACEC,KAAM,eACNC,MAAO,CAELC,QAAS,CACPV,KAAMW,MACNC,QAASA,IAAM,IAGjBC,WAAY,CACVb,KAAMc,OACNF,QAASA,IAAM,gBAAgBG,KAAKC,SAASC,SAAS,IAAIC,OAAO,EAAG,MAItEC,SAAU,CACRnB,KAAMoB,QACNR,SAAS,GAEXS,YAAa,CACXrB,KAAMoB,QACNR,SAAS,GAEXU,SAAU,CACRtB,KAAMoB,QACNR,SAAS,GAEXW,SAAU,CACRvB,KAAMoB,QACNR,SAAS,GAGXY,aAAc,CACZxB,KAAMoB,QACNR,SAAS,GAEXa,gBAAiB,CACfzB,KAAMoB,QACNR,SAAS,GAEXc,aAAc,CACZ1B,KAAMoB,QACNR,SAAS,GAEXe,aAAc,CACZ3B,KAAMoB,QACNR,SAAS,GAEXgB,cAAe,CACb5B,KAAMoB,QACNR,SAAS,IAKbiB,MAAO,CACLlC,eAAgB,CACdmC,OAAAA,CAAQC,GAENC,EAAAA,EAASC,KAAK,gCAAiC,CAC7CpB,WAAYqB,KAAKrB,WACjBH,QAASqB,GAEb,EACAI,MAAM,EACNC,WAAW,IAIfC,SAAU,CAER1C,cAAAA,GAEE,GAAIuC,KAAKxB,SAAWwB,KAAKxB,QAAQ4B,OAAS,EACxC,OAAOJ,KAAKxB,QAId,MAAM6B,EAAiB,GAkCvB,OAhCIL,KAAKf,UACPoB,EAAeC,KAAK,CAClBtC,MAAO,KACPK,OAAQ,OACRJ,SAAU+B,KAAKV,eAIfU,KAAKb,aACPkB,EAAeC,KAAK,CAClBtC,MAAO,UACPK,OAAQ,OACRJ,SAAU+B,KAAKT,kBAIfS,KAAKX,UACPgB,EAAeC,KAAK,CAClBtC,MAAOgC,KAAKN,cAAgB,OAAS,OACrCrB,OAAQ,OACRJ,SAAU+B,KAAKP,eAIfO,KAAKZ,UACPiB,EAAeC,KAAK,CAClBtC,MAAO,IACPK,OAAQ,OACRJ,SAAU+B,KAAKR,eAIZa,CACT,GAEFE,QAAS,CAEPnC,iBAAAA,CAAkBC,GAChB2B,KAAKQ,MAAMnC,EACb,EAGAoC,IAAAA,GACET,KAAKQ,MAAM,OACb,EACAE,IAAAA,GACEV,KAAKQ,MAAM,OACb,EACAG,MAAAA,GACEX,KAAKQ,MAAM,OACb,EACAI,IAAAA,GACEZ,KAAKQ,MAAM,OACb,GAGFK,OAAAA,GAEEf,EAAAA,EAASC,KAAK,wBAAyB,CACrCpB,WAAYqB,KAAKrB,WACjBH,QAASwB,KAAKvC,gBAElB,EAEAqD,aAAAA,GAEEhB,EAAAA,EAASC,KAAK,0BAA2B,CACvCpB,WAAYqB,KAAKrB,YAErB,G,UC9JF,MAAMoC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://tsubaki-game-library/./src/components/GameControls.vue","webpack://tsubaki-game-library/./src/components/GameControls.vue?bc01"],"sourcesContent":["<template>\n  <div class=\"btns\">\n    <input\n      v-for=\"(button, index) in displayButtons\"\n      :key=\"button.id || index\"\n      type=\"button\"\n      :value=\"button.label\"\n      :disabled=\"button.disabled\"\n      @click=\"handleButtonClick(button.action)\"\n    />\n  </div>\n</template>\n\n<script>\nimport eventBus from \"../utils/eventBus.js\";\n\nexport default {\n  name: \"GameControls\",\n  props: {\n    // 使用数组定义按钮配置，优先级高于单独的show属性\n    buttons: {\n      type: Array,\n      default: () => [],\n    },\n    // 组件唯一标识，用于事件总线通信\n    instanceId: {\n      type: String,\n      default: () => `gameControls_${Math.random().toString(36).substr(2, 9)}`,\n    },\n\n    // 以下属性保持向后兼容性\n    showUndo: {\n      type: Boolean,\n      default: true,\n    },\n    showRestart: {\n      type: Boolean,\n      default: true,\n    },\n    showStep: {\n      type: Boolean,\n      default: true,\n    },\n    showAuto: {\n      type: Boolean,\n      default: true,\n    },\n\n    undoDisabled: {\n      type: Boolean,\n      default: false,\n    },\n    restartDisabled: {\n      type: Boolean,\n      default: false,\n    },\n    stepDisabled: {\n      type: Boolean,\n      default: false,\n    },\n    autoDisabled: {\n      type: Boolean,\n      default: false,\n    },\n    isAutoRunning: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  \n  // 使用watch监听按钮配置变化\n  watch: {\n    displayButtons: {\n      handler(newButtons) {\n        // 向事件总线广播按钮配置\n        eventBus.emit('game-controls:buttons-updated', {\n          instanceId: this.instanceId,\n          buttons: newButtons\n        });\n      },\n      deep: true,\n      immediate: true\n    }\n  },\n  \n  computed: {\n    // 根据buttons数组或单独的show属性生成要显示的按钮列表\n    displayButtons() {\n      // 如果提供了buttons数组，则使用它\n      if (this.buttons && this.buttons.length > 0) {\n        return this.buttons;\n      }\n\n      // 否则使用单独的show属性生成默认按钮列表（保持向后兼容）\n      const defaultButtons = [];\n\n      if (this.showUndo) {\n        defaultButtons.push({\n          label: \"◀︎\",\n          action: \"undo\",\n          disabled: this.undoDisabled,\n        });\n      }\n\n      if (this.showRestart) {\n        defaultButtons.push({\n          label: \"RESTART\",\n          action: \"goon\",\n          disabled: this.restartDisabled,\n        });\n      }\n\n      if (this.showAuto) {\n        defaultButtons.push({\n          label: this.isAutoRunning ? \"STOP\" : \"AUTO\",\n          action: \"auto\",\n          disabled: this.autoDisabled,\n        });\n      }\n\n      if (this.showStep) {\n        defaultButtons.push({\n          label: \"►\",\n          action: \"step\",\n          disabled: this.stepDisabled,\n        });\n      }\n\n      return defaultButtons;\n    },\n  },\n  methods: {\n    // 统一的按钮点击事件处理\n    handleButtonClick(action) {\n      this.$emit(action);\n    },\n\n    // 保留原有方法以保持兼容性\n    undo() {\n      this.$emit(\"undo\");\n    },\n    goon() {\n      this.$emit(\"goon\");\n    },\n    stepFn() {\n      this.$emit(\"step\");\n    },\n    pass() {\n      this.$emit(\"auto\");\n    },\n  },\n  \n  created() {\n    // 组件挂载时通知事件总线\n    eventBus.emit('game-controls:created', {\n      instanceId: this.instanceId,\n      buttons: this.displayButtons\n    });\n  },\n  \n  beforeUnmount() {\n    // 组件卸载时通知事件总线\n    eventBus.emit('game-controls:unmounted', {\n      instanceId: this.instanceId\n    });\n  },\n};\n</script>\n\n<style scoped>\n@import url(\"./sum.css\");\n\n/* 保持与原样式一致的按钮容器样式 */\n.btns {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.25rem 0;\n  flex-wrap: wrap;\n}\n\n/* 覆盖原有input样式以确保按钮一致性 */\n.btns input {\n  margin: 0.5rem 0;\n  color: #3c4245;\n  padding: 0.25rem 0.625rem;\n  border: 0.0625rem solid #dfcdc3;\n  background-color: #dfcdc3;\n  cursor: pointer;\n  font-size: 0.875rem;\n}\n\n.btns input:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n</style>\n","import { render } from \"./GameControls.vue?vue&type=template&id=d8a002ba&scoped=true\"\nimport script from \"./GameControls.vue?vue&type=script&lang=js\"\nexport * from \"./GameControls.vue?vue&type=script&lang=js\"\n\nimport \"./GameControls.vue?vue&type=style&index=0&id=d8a002ba&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-d8a002ba\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_Fragment","_renderList","$options","displayButtons","button","index","key","id","type","value","label","disabled","onClick","$event","handleButtonClick","action","name","props","buttons","Array","default","instanceId","String","Math","random","toString","substr","showUndo","Boolean","showRestart","showStep","showAuto","undoDisabled","restartDisabled","stepDisabled","autoDisabled","isAutoRunning","watch","handler","newButtons","eventBus","emit","this","deep","immediate","computed","length","defaultButtons","push","methods","$emit","undo","goon","stepFn","pass","created","beforeUnmount","__exports__","render"],"sourceRoot":""}